// variables
$bg: #0f0f0f;
$muted: #2b2b2b;
$text: #eaeaea;
$pill-bg: #1c1c1c;
$pill-border: rgba(255,255,255,0.04);
$accent: #e6cf62; // call-to-action
$gap: 1rem;
$container-max: 1200px;
$radius: 10px;
$breakpoint-md: 900px;

@mixin flex-center($jc: center, $ai: center) {
  display: flex;
  justify-content: $jc;
  align-items: $ai;
}

.site-header {
  background: linear-gradient(180deg, rgba(0,0,0,0.8), rgba(0,0,0,0.95));
  color: $text;
  border-bottom: 1px solid rgba(255,255,255,0.03);
  position: sticky;
  top: 0;
  z-index: 80;

  &__inner {
    max-width: $container-max;
    margin: 0 auto;
    padding: 0.8rem 1rem;
    @include flex-center(space-between, center);
    gap: $gap;
  }

  .brand {
    font-weight: 600;
    letter-spacing: 0.16em;
    color: $text;
    text-decoration: none;
    .brand__logo { display:inline-block; padding: 0.2rem 0.4rem; }
  }

  .main-nav {
    &__list {
      display: flex;
      gap: 0.8rem;
      align-items: center;
      list-style: none;
      margin: 0;
      padding: 0;
    }

    &__item {
      display: inline-flex;
      align-items: center;

      &--dropdown { position: relative; }
    }

    &__link, &__button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.55rem 0.9rem;
      text-decoration: none;
      color: $text;
      background: $pill-bg;
      border-radius: $radius;
      border: 1px solid $pill-border;
      font-weight: 600;
      font-size: 0.9rem;
      cursor: pointer;
      transition: transform .12s ease, background .12s ease, color .12s ease;

      &:hover, &:focus {
        transform: translateY(-3px);
        background: lighten($pill-bg, 6%);
        outline: none;
      }
    }

    // cart style
    &__cart {
      position: relative;
      padding-right: 0.8rem;
      .cart__badge {
        position: absolute;
        top: -6px;
        right: -6px;
        min-width: 18px;
        height: 18px;
        border-radius: 999px;
        background: $accent;
        color: #111;
        font-size: 0.7rem;
        font-weight: 700;
        display: inline-flex;
        justify-content: center;
        align-items: center;
        padding: 0 5px;
        border: 2px solid $bg;
      }
    }
  }

  // dropdown menu
  .dropdown {
    position: absolute;
    top: calc(100% + 8px);
    left: 0;
    min-width: 160px;
    background: $pill-bg;
    border: 1px solid $pill-border;
    border-radius: $radius;
    padding: 0.4rem;
    box-shadow: 0 8px 30px rgba(2,6,23,0.6);
    opacity: 0;
    transform-origin: top left;
    transform: translateY(-6px) scale(.98);
    pointer-events: none;
    transition: opacity .15s ease, transform .15s ease;

    [role="menuitem"] {
      display: block;
      padding: 0.6rem 0.9rem;
      color: $text;
      text-decoration: none;
      font-weight: 500;
      border-radius: 8px;
      &:hover, &:focus { background: lighten($pill-bg, 6%); }
    }
  }

  // visible state when expanded via JS
  .main-nav__item--dropdown[aria-expanded="true"] .dropdown,
  .main-nav__item--dropdown .main-nav__button[aria-expanded="true"] + .dropdown {
    opacity: 1;
    transform: translateY(0) scale(1);
    pointer-events: auto;
  }

  .btn {
    &--primary {
      background: $accent;
      color: #111;
      padding: 0.5rem 0.9rem;
      border-radius: 8px;
      border: none;
      font-weight: 700;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      white-space: nowrap;
      box-shadow: 0 6px 18px rgba(0,0,0,0.45);
      &:hover { transform: translateY(-3px); }
    }
  }

  // mobile toggle button
  .mobile-toggle {
    display: none;
    background: transparent;
    border: none;
    cursor: pointer;
    padding: 0.4rem;
    margin-left: 8px;
    .mobile-toggle__bar {
      display: block;
      width: 22px;
      height: 2px;
      background: $text;
      margin: 4px 0;
      border-radius: 2px;
    }
  }

  // mobile menu (hidden on desktop)
  .mobile-menu {
    display: none;
    background: linear-gradient(180deg, rgba(0,0,0,0.92), rgba(0,0,0,0.98));
    .mobile-menu__list {
      list-style: none;
      margin: 0;
      padding: 0.8rem 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.6rem;

      a { 
        padding: 0.6rem 0.9rem;
        border-radius: 8px;
        background: $pill-bg;
        color: $text;
        text-decoration: none;
      }
    }
  }
}

// RESPONSIVE
@media (max-width: $breakpoint-md) {
  .site-header {
    .main-nav { display: none; }        // hide desktop nav
    .mobile-toggle { display: inline-flex; } // show hamburger
    .mobile-menu {
      display: block;
      // use the [hidden] attribute to control visibility with JS
      &[hidden] { display: none; }
    }

    &__inner { padding: 0.6rem 1rem; }
  }
}
